title: 对象的复制与传递参数
date: 2014-11-21 10:37:43
tags:
- javascript
categories: 前端学习笔记
---

好记性不如烂笔头~

#### 一、引用类型值，复制
当从一个变量A向另一个变量B复制引用类型的值时，会将存储在变量A对象中的值复制一份，放到为新变量B分配的空间中，注意：**这个值的副本实际上是一个指针**，而这个指针指向存储在堆中的一个对象。复制结束后，两个变量实际上将引用同一个对象。
<font color='red'>因此改变其中一个变量，会影响另一个变量</font>，

```{javascript}
var obj1 = new Object();
var obj2 = obj1;
obj1.name = "hxstdio";
alert(obj2.name); //hxstdio
```

#### 二、引用类型值，传递参数

书上说ECMAScript中所有函数的参数都是按值传递的。难以理解，如果参数是object，不是按引用传递的么？先看下面的例子：

```{javascript}
function setName(obj){
    obj.name = "hxstdio";
}

var myObj = new Object();
setName(myObj);
alert(myObj.name); //hxstdio
```

在setName这个函数内部，obj与myObj引用的是同一个对象，所以在函数内部修改obj后，函数外部的myObj也被修改了。是不是意味着，对象是按引用传递的？为了证明对象是按值传递的，再看下面的例子：

```{javascript}
function setName(obj){
    obj.name = "hxstdio";
    obj = new Object();
    obj.name = "new one";
}

var myObj = new Object();
setName(myObj);
alert(myObj.name); //hxstdio
```
如果对象是按引用传递的，那么在函数里给obj赋了一个新的对象，函数外面的myObj应该指向这个新的对象，那么alert的值应该是"new one"才对，但是实际上alert的还是“hxstdio”，由此可以说明函数参数为对象时，也是按值来传递的，只是会按引用来访问同一个对象。

